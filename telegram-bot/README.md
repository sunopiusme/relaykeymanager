# Relay Beta Bot

Telegram –±–æ—Ç –¥–ª—è –≤—ã–¥–∞—á–∏ –±–µ—Ç–∞-–∫–ª—é—á–µ–π Relay —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç–æ–π.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîê Ed25519 –ø–æ–¥–ø–∏—Å—å –∫–ª—é—á–µ–π ‚Äî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å
- üî¢ –õ–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π ‚Äî –∫–∞–∂–¥—ã–π –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ 2 –º–∞—à–∏–Ω–∞—Ö
- üë§ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚Äî –∫–ª—é—á —Å–≤—è–∑–∞–Ω —Å Telegram ID
- üåç –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å ‚Äî English/–†—É—Å—Å–∫–∏–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd telegram-bot
pip install -r requirements.txt
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–π –±–æ—Ç–∞

1. –ù–∞–ø–∏—à–∏ [@BotFather](https://t.me/BotFather)
2. –°–æ–∑–¥–∞–π –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞: `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∏

```bash
python crypto.py
```

–≠—Ç–æ –≤—ã–≤–µ–¥–µ—Ç:
- Private key ‚Äî —Ö—Ä–∞–Ω–∏ –≤ —Å–µ–∫—Ä–µ—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É–π –≤ –±–æ—Ç–µ
- Public key ‚Äî –≤—Å—Ç–∞–≤—å –≤ Swift –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### 3. –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export TELEGRAM_BOT_TOKEN="your_bot_token"
export RELAY_BETA_SIGNING_KEY="your_private_key_hex"
```

### 4. –û–±–Ω–æ–≤–∏ Swift –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í —Ñ–∞–π–ª–µ `Relay/Sources/Services/BetaKeyVerifier.swift`:

```swift
private static let betaPublicKeyHex = "YOUR_PUBLIC_KEY_HEX"
```

### 5. –ù–∞—Å—Ç—Ä–æ–π –∞–¥–º–∏–Ω–æ–≤

–í `config.py` –¥–æ–±–∞–≤—å —Å–≤–æ–π Telegram ID:

```python
ADMIN_IDS = [123456789]  # –¢–≤–æ–π ID
```

–£–∑–Ω–∞—Ç—å ID: –Ω–∞–ø–∏—à–∏ [@userinfobot](https://t.me/userinfobot)

## –ó–∞–ø—É—Å–∫

```bash
python telegram_beta_bot.py
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/start` ‚Äî –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã, –≤—ã–±–æ—Ä —è–∑—ã–∫–∞
- `/key` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –±–µ—Ç–∞-–∫–ª—é—á
- `/lang` ‚Äî —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫

### –î–ª—è –∞–¥–º–∏–Ω–æ–≤
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–π
- `/broadcast <message>` ‚Äî —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `config.py`:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `BETA_DAYS` | –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–ª—é—á–∞ | 45 –¥–Ω–µ–π |
| `MAX_BETA_USERS` | –õ–∏–º–∏—Ç –±–µ—Ç–∞-—Ç–µ—Å—Ç–µ—Ä–æ–≤ | 100 |
| `MAX_ACTIVATIONS_PER_KEY` | –ú–∞—à–∏–Ω –Ω–∞ –∫–ª—é—á | 2 |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
telegram-bot/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ beta_users.json      # –í—ã–¥–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ activations.json     # –ê–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ –º–∞—à–∏–Ω–∞–º
‚îú‚îÄ‚îÄ telegram_beta_bot.py     # –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
‚îú‚îÄ‚îÄ crypto.py                # –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è
‚îú‚îÄ‚îÄ activation_tracker.py    # –¢—Ä–µ–∫–∏–Ω–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–π
‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ requirements.txt
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á"
2. –ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç payload —Å Telegram ID, —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ–¥–æ–º —Å–∫–∏–¥–∫–∏
3. Payload –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è Ed25519 –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
4. –ö–ª—é—á: `RELAY-BETA-{base64_payload}.{base64_signature}`

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–ª—é—á –≤ Relay
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
3. –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å—å –≤–∞–ª–∏–¥–Ω–∞ ‚Äî –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç payload
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π (2 –º–∞—à–∏–Ω—ã)
6. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Keychain

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏

- ‚ùå –°–ª—É—á–∞–π–Ω—ã–µ –∫–ª—é—á–∏ ‚Äî –Ω–µ –ø—Ä–æ–π–¥—É—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏
- ‚ùå –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –∫–ª—é—á–∏ ‚Äî –ø–æ–¥–ø–∏—Å—å –Ω–µ —Å–æ–≤–ø–∞–¥—ë—Ç
- ‚ùå –ö–ª—é—á–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ Telegram ID
- ‚ùå –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ ‚Äî —Ç—Ä–µ–∫–∏–Ω–≥ –ø–æ machine ID

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π

–°—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –±–µ–∑ –ø–æ–¥–ø–∏—Å–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
–ü–æ–ø—Ä–æ—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞.
